nohup: ignoring input
Starting a Gradle Daemon, 2 busy and 1 stopped Daemons could not be reused, use --status for details
> Task :compileJava
> Task :processResources UP-TO-DATE
> Task :classes
> Task :resolveMainClassName

> Task :bootRun
Standard Commons Logging discovery in action with spring-jcl: please remove commons-logging.jar from classpath in order to avoid potential conflicts
Standard Commons Logging discovery in action with spring-jcl: please remove commons-logging.jar from classpath in order to avoid potential conflicts

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.5.6)

2025-11-06T02:52:46.639-03:00  INFO 646382 --- [mvt-events] [  restartedMain] c.mvt.mvt_events.MvtEventsApplication    : Starting MvtEventsApplication using Java 17.0.15 with PID 646382 (/home/fbarros/Documents/projects/mvt-events/build/classes/java/main started by fbarros in /home/fbarros/Documents/projects/mvt-events)
2025-11-06T02:52:46.644-03:00  INFO 646382 --- [mvt-events] [  restartedMain] c.mvt.mvt_events.MvtEventsApplication    : No active profile set, falling back to 1 default profile: "default"
2025-11-06T02:52:46.758-03:00  INFO 646382 --- [mvt-events] [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-11-06T02:52:46.759-03:00  INFO 646382 --- [mvt-events] [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-11-06T02:52:46.788-03:00  INFO 646382 --- [mvt-events] [  restartedMain] .s.b.d.c.l.DockerComposeLifecycleManager : Using Docker Compose file /home/fbarros/Documents/projects/mvt-events/compose.yaml
2025-11-06T02:52:47.636-03:00  INFO 646382 --- [mvt-events] [  restartedMain] .s.b.d.c.l.DockerComposeLifecycleManager : There are already Docker Compose services running, skipping startup
2025-11-06T02:52:50.181-03:00  INFO 646382 --- [mvt-events] [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-06T02:52:50.349-03:00  INFO 646382 --- [mvt-events] [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 152 ms. Found 13 JPA repository interfaces.
2025-11-06T02:52:51.919-03:00  INFO 646382 --- [mvt-events] [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-11-06T02:52:51.947-03:00  INFO 646382 --- [mvt-events] [  restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-11-06T02:52:51.948-03:00  INFO 646382 --- [mvt-events] [  restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-06T02:52:52.033-03:00  INFO 646382 --- [mvt-events] [  restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-11-06T02:52:52.034-03:00  INFO 646382 --- [mvt-events] [  restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4374 ms
Standard Commons Logging discovery in action with spring-jcl: please remove commons-logging.jar from classpath in order to avoid potential conflicts
2025-11-06T02:52:52.735-03:00  INFO 646382 --- [mvt-events] [  restartedMain] org.flywaydb.core.FlywayExecutor         : Database: jdbc:postgresql://127.0.0.1:5435/mvt-events?ApplicationName=mvt-events (PostgreSQL 16.10)
2025-11-06T02:52:52.904-03:00  INFO 646382 --- [mvt-events] [  restartedMain] o.f.core.internal.command.DbValidate     : Successfully validated 56 migrations (execution time 00:00.130s)
2025-11-06T02:52:52.970-03:00  INFO 646382 --- [mvt-events] [  restartedMain] o.f.core.internal.command.DbMigrate      : Current version of schema "public": 57
2025-11-06T02:52:52.977-03:00  INFO 646382 --- [mvt-events] [  restartedMain] o.f.core.internal.command.DbMigrate      : Schema "public" is up to date. No migration necessary.
2025-11-06T02:52:53.113-03:00  INFO 646382 --- [mvt-events] [  restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-06T02:52:53.211-03:00  INFO 646382 --- [mvt-events] [  restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.29.Final
2025-11-06T02:52:53.271-03:00  INFO 646382 --- [mvt-events] [  restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-11-06T02:52:53.693-03:00  INFO 646382 --- [mvt-events] [  restartedMain] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-06T02:52:53.739-03:00  INFO 646382 --- [mvt-events] [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-11-06T02:52:53.819-03:00  INFO 646382 --- [mvt-events] [  restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@253e8f59
2025-11-06T02:52:53.822-03:00  INFO 646382 --- [mvt-events] [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-11-06T02:52:53.963-03:00  INFO 646382 --- [mvt-events] [  restartedMain] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 16.10
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-06T02:52:56.394-03:00  INFO 646382 --- [mvt-events] [  restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-06T02:52:56.494-03:00  INFO 646382 --- [mvt-events] [  restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-06T02:52:57.035-03:00  INFO 646382 --- [mvt-events] [  restartedMain] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-06T02:52:58.315-03:00 DEBUG 646382 --- [mvt-events] [  restartedMain] com.mvt.mvt_events.tenant.TenantFilter   : Filter 'tenantFilter' configured for use
2025-11-06T02:52:58.561-03:00  INFO 646382 --- [mvt-events] [  restartedMain] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-11-06T02:53:02.124-03:00  INFO 646382 --- [mvt-events] [  restartedMain] c.mvt.mvt_events.config.WebPushConfig    : BouncyCastle provider registrado para Web Push
2025-11-06T02:53:02.501-03:00  INFO 646382 --- [mvt-events] [  restartedMain] c.mvt.mvt_events.config.WebPushConfig    : ‚úÖ Web Push Service configurado com VAPID keys
2025-11-06T02:53:02.502-03:00  INFO 646382 --- [mvt-events] [  restartedMain] c.mvt.mvt_events.config.WebPushConfig    : üîë Public Key: BN8ym6-oByG6GoAEC939...
2025-11-06T02:53:02.503-03:00  INFO 646382 --- [mvt-events] [  restartedMain] c.mvt.mvt_events.config.WebPushConfig    : üìß Subject: mailto:admin@mvt-events.com
2025-11-06T02:53:04.241-03:00  INFO 646382 --- [mvt-events] [  restartedMain] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 3 endpoints beneath base path '/actuator'
2025-11-06T02:53:05.454-03:00  INFO 646382 --- [mvt-events] [  restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2025-11-06T02:53:05.574-03:00  INFO 646382 --- [mvt-events] [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-11-06T02:53:05.610-03:00  INFO 646382 --- [mvt-events] [  restartedMain] c.mvt.mvt_events.MvtEventsApplication    : Started MvtEventsApplication in 19.786 seconds (process running for 20.751)
2025-11-06T02:53:05.707-03:00  INFO 646382 --- [mvt-events] [  restartedMain] c.mvt.mvt_events.startup.CityDataLoader  : üáßüá∑ Iniciando verifica√ß√£o das cidades brasileiras...
2025-11-06T02:53:05.792-03:00 DEBUG 646382 --- [mvt-events] [  restartedMain] org.hibernate.SQL                        : 
    /* select
        count(*) 
    from
        City x */ select
            count(*) 
        from
            cities c1_0
Hibernate: 
    /* select
        count(*) 
    from
        City x */ select
            count(*) 
        from
            cities c1_0
2025-11-06T02:53:05.822-03:00  INFO 646382 --- [mvt-events] [  restartedMain] c.mvt.mvt_events.startup.CityDataLoader  : ‚úÖ Cidades j√° carregadas no banco: 5570 registros (>= 5570). N√£o √© necess√°rio recarregar.
2025-11-06T02:53:19.921-03:00  INFO 646382 --- [mvt-events] [0.0-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-06T02:53:19.922-03:00  INFO 646382 --- [mvt-events] [0.0-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-11-06T02:53:19.927-03:00  INFO 646382 --- [mvt-events] [0.0-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 5 ms
2025-11-06T02:53:19.996-03:00  WARN 646382 --- [mvt-events] [0.0-8080-exec-1] c.m.m.common.JwtAuthenticationFilter     : JWT Token does not begin with Bearer String
2025-11-06T02:53:28.352-03:00  WARN 646382 --- [mvt-events] [0.0-8080-exec-2] c.m.m.common.JwtAuthenticationFilter     : JWT Token does not begin with Bearer String
2025-11-06T02:53:28.809-03:00 DEBUG 646382 --- [mvt-events] [0.0-8080-exec-2] org.hibernate.SQL                        : 
    /* SELECT
        u 
    FROM
        User u 
    WHERE
        u.username = :username */ select
            u1_0.id,
            u1_0.address,
            c1_0.id,
            c1_0.created_at,
            c1_0.ibge_code,
            c1_0.name,
            c1_0.state,
            c1_0.state_code,
            c1_0.updated_at,
            u1_0.country,
            u1_0.document_number,
            u1_0.created_at,
            u1_0.date_of_birth,
            u1_0.emergency_contact,
            u1_0.enabled,
            u1_0.gender,
            u1_0.latitude,
            u1_0.longitude,
            u1_0.name,
            o1_0.id,
            o1_0.city_id,
            o1_0.commission_percentage,
            o1_0.contact_email,
            o1_0.created_at,
            o1_0.description,
            o1_0.logo_url,
            o1_0.name,
            o1_0.phone,
            o1_0.slug,
            o1_0.status,
            o1_0.updated_at,
            o1_0.website,
            u1_0.password,
            u1_0.phone,
            u1_0.role,
            u1_0.state,
            u1_0.updated_at,
            u1_0.username 
        from
            users u1_0 
        left join
            cities c1_0 
                on c1_0.id=u1_0.city_id 
        left join
            organizations o1_0 
                on o1_0.id=u1_0.organization_id 
        where
            u1_0.username=?
Hibernate: 
    /* SELECT
        u 
    FROM
        User u 
    WHERE
        u.username = :username */ select
            u1_0.id,
            u1_0.address,
            c1_0.id,
            c1_0.created_at,
            c1_0.ibge_code,
            c1_0.name,
            c1_0.state,
            c1_0.state_code,
            c1_0.updated_at,
            u1_0.country,
            u1_0.document_number,
            u1_0.created_at,
            u1_0.date_of_birth,
            u1_0.emergency_contact,
            u1_0.enabled,
            u1_0.gender,
            u1_0.latitude,
            u1_0.longitude,
            u1_0.name,
            o1_0.id,
            o1_0.city_id,
            o1_0.commission_percentage,
            o1_0.contact_email,
            o1_0.created_at,
            o1_0.description,
            o1_0.logo_url,
            o1_0.name,
            o1_0.phone,
            o1_0.slug,
            o1_0.status,
            o1_0.updated_at,
            o1_0.website,
            u1_0.password,
            u1_0.phone,
            u1_0.role,
            u1_0.state,
            u1_0.updated_at,
            u1_0.username 
        from
            users u1_0 
        left join
            cities c1_0 
                on c1_0.id=u1_0.city_id 
        left join
            organizations o1_0 
                on o1_0.id=u1_0.organization_id 
        where
            u1_0.username=?
2025-11-06T02:53:28.812-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-2] org.hibernate.orm.jdbc.bind              : binding parameter (1:VARCHAR) <- [moveltrack@gmail.com]
2025-11-06T02:53:31.447-03:00 DEBUG 646382 --- [mvt-events] [0.0-8080-exec-3] org.hibernate.SQL                        : 
    /* SELECT
        u 
    FROM
        User u 
    WHERE
        u.username = :username */ select
            u1_0.id,
            u1_0.address,
            c1_0.id,
            c1_0.created_at,
            c1_0.ibge_code,
            c1_0.name,
            c1_0.state,
            c1_0.state_code,
            c1_0.updated_at,
            u1_0.country,
            u1_0.document_number,
            u1_0.created_at,
            u1_0.date_of_birth,
            u1_0.emergency_contact,
            u1_0.enabled,
            u1_0.gender,
            u1_0.latitude,
            u1_0.longitude,
            u1_0.name,
            o1_0.id,
            o1_0.city_id,
            o1_0.commission_percentage,
            o1_0.contact_email,
            o1_0.created_at,
            o1_0.description,
            o1_0.logo_url,
            o1_0.name,
            o1_0.phone,
            o1_0.slug,
            o1_0.status,
            o1_0.updated_at,
            o1_0.website,
            u1_0.password,
            u1_0.phone,
            u1_0.role,
            u1_0.state,
            u1_0.updated_at,
            u1_0.username 
        from
            users u1_0 
        left join
            cities c1_0 
                on c1_0.id=u1_0.city_id 
        left join
            organizations o1_0 
                on o1_0.id=u1_0.organization_id 
        where
            u1_0.username=?
Hibernate: 
    /* SELECT
        u 
    FROM
        User u 
    WHERE
        u.username = :username */ select
            u1_0.id,
            u1_0.address,
            c1_0.id,
            c1_0.created_at,
            c1_0.ibge_code,
            c1_0.name,
            c1_0.state,
            c1_0.state_code,
            c1_0.updated_at,
            u1_0.country,
            u1_0.document_number,
            u1_0.created_at,
            u1_0.date_of_birth,
            u1_0.emergency_contact,
            u1_0.enabled,
            u1_0.gender,
            u1_0.latitude,
            u1_0.longitude,
            u1_0.name,
            o1_0.id,
            o1_0.city_id,
            o1_0.commission_percentage,
            o1_0.contact_email,
            o1_0.created_at,
            o1_0.description,
            o1_0.logo_url,
            o1_0.name,
            o1_0.phone,
            o1_0.slug,
            o1_0.status,
            o1_0.updated_at,
            o1_0.website,
            u1_0.password,
            u1_0.phone,
            u1_0.role,
            u1_0.state,
            u1_0.updated_at,
            u1_0.username 
        from
            users u1_0 
        left join
            cities c1_0 
                on c1_0.id=u1_0.city_id 
        left join
            organizations o1_0 
                on o1_0.id=u1_0.organization_id 
        where
            u1_0.username=?
2025-11-06T02:53:31.449-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-3] org.hibernate.orm.jdbc.bind              : binding parameter (1:VARCHAR) <- [motoboy1@gmail.com]
2025-11-06T02:53:31.464-03:00  INFO 646382 --- [mvt-events] [0.0-8080-exec-3] com.mvt.mvt_events.tenant.TenantFilter   : üîç TenantFilter - Request: PUT /api/users/6186c7af-2311-4756-bfc6-ce98bd31ed27/location
2025-11-06T02:53:31.464-03:00  INFO 646382 --- [mvt-events] [0.0-8080-exec-3] com.mvt.mvt_events.tenant.TenantFilter   : üîç TenantFilter - Authentication: UsernamePasswordAuthenticationToken
2025-11-06T02:53:31.465-03:00  INFO 646382 --- [mvt-events] [0.0-8080-exec-3] com.mvt.mvt_events.tenant.TenantFilter   : üîç TenantFilter - Principal type: com.mvt.mvt_events.jpa.User
2025-11-06T02:53:31.465-03:00  INFO 646382 --- [mvt-events] [0.0-8080-exec-3] com.mvt.mvt_events.tenant.TenantFilter   : üîç TenantFilter - Principal instanceof User: true
2025-11-06T02:53:31.465-03:00  INFO 646382 --- [mvt-events] [0.0-8080-exec-3] com.mvt.mvt_events.tenant.TenantFilter   : üîç TenantFilter - User: motoboy1@gmail.com
2025-11-06T02:53:31.466-03:00  INFO 646382 --- [mvt-events] [0.0-8080-exec-3] com.mvt.mvt_events.tenant.TenantFilter   : ‚úÖ TenantFilter - Tenant ID set to: 78
2025-11-06T02:53:31.542-03:00 DEBUG 646382 --- [mvt-events] [0.0-8080-exec-3] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.address,
        u1_0.city_id,
        u1_0.country,
        u1_0.document_number,
        u1_0.created_at,
        u1_0.date_of_birth,
        u1_0.emergency_contact,
        u1_0.enabled,
        u1_0.gender,
        u1_0.latitude,
        u1_0.longitude,
        u1_0.name,
        u1_0.organization_id,
        u1_0.password,
        u1_0.phone,
        u1_0.role,
        u1_0.state,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
Hibernate: 
    select
        u1_0.id,
        u1_0.address,
        u1_0.city_id,
        u1_0.country,
        u1_0.document_number,
        u1_0.created_at,
        u1_0.date_of_birth,
        u1_0.emergency_contact,
        u1_0.enabled,
        u1_0.gender,
        u1_0.latitude,
        u1_0.longitude,
        u1_0.name,
        u1_0.organization_id,
        u1_0.password,
        u1_0.phone,
        u1_0.role,
        u1_0.state,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-11-06T02:53:31.543-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-3] org.hibernate.orm.jdbc.bind              : binding parameter (1:UUID) <- [6186c7af-2311-4756-bfc6-ce98bd31ed27]
2025-11-06T02:53:31.616-03:00 DEBUG 646382 --- [mvt-events] [0.0-8080-exec-3] org.hibernate.SQL                        : 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        c1_0.id,
        c1_0.created_at,
        c1_0.ibge_code,
        c1_0.name,
        c1_0.state,
        c1_0.state_code,
        c1_0.updated_at,
        u1_0.country,
        u1_0.document_number,
        u1_0.created_at,
        u1_0.date_of_birth,
        u1_0.emergency_contact,
        u1_0.enabled,
        u1_0.gender,
        u1_0.latitude,
        u1_0.longitude,
        u1_0.name,
        o1_0.id,
        o1_0.city_id,
        o1_0.commission_percentage,
        o1_0.contact_email,
        o1_0.created_at,
        o1_0.description,
        o1_0.logo_url,
        o1_0.name,
        o1_0.phone,
        o1_0.slug,
        o1_0.status,
        o1_0.updated_at,
        o1_0.website,
        u1_0.password,
        u1_0.phone,
        u1_0.role,
        u1_0.state,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    left join
        cities c1_0 
            on c1_0.id=u1_0.city_id 
    left join
        organizations o1_0 
            on o1_0.id=u1_0.organization_id 
    where
        u1_0.username=?
Hibernate: 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        c1_0.id,
        c1_0.created_at,
        c1_0.ibge_code,
        c1_0.name,
        c1_0.state,
        c1_0.state_code,
        c1_0.updated_at,
        u1_0.country,
        u1_0.document_number,
        u1_0.created_at,
        u1_0.date_of_birth,
        u1_0.emergency_contact,
        u1_0.enabled,
        u1_0.gender,
        u1_0.latitude,
        u1_0.longitude,
        u1_0.name,
        o1_0.id,
        o1_0.city_id,
        o1_0.commission_percentage,
        o1_0.contact_email,
        o1_0.created_at,
        o1_0.description,
        o1_0.logo_url,
        o1_0.name,
        o1_0.phone,
        o1_0.slug,
        o1_0.status,
        o1_0.updated_at,
        o1_0.website,
        u1_0.password,
        u1_0.phone,
        u1_0.role,
        u1_0.state,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    left join
        cities c1_0 
            on c1_0.id=u1_0.city_id 
    left join
        organizations o1_0 
            on o1_0.id=u1_0.organization_id 
    where
        u1_0.username=?
2025-11-06T02:53:31.617-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-3] org.hibernate.orm.jdbc.bind              : binding parameter (1:VARCHAR) <- [motoboy1@gmail.com]
2025-11-06T02:53:31.745-03:00 DEBUG 646382 --- [mvt-events] [0.0-8080-exec-3] org.hibernate.SQL                        : 
    /* update
        for com.mvt.mvt_events.jpa.User */update users 
    set
        address=?,
        city_id=?,
        country=?,
        document_number=?,
        date_of_birth=?,
        emergency_contact=?,
        enabled=?,
        gender=?,
        latitude=?,
        longitude=?,
        name=?,
        organization_id=?,
        password=?,
        phone=?,
        role=?,
        state=?,
        updated_at=?,
        username=? 
    where
        id=?
Hibernate: 
    /* update
        for com.mvt.mvt_events.jpa.User */update users 
    set
        address=?,
        city_id=?,
        country=?,
        document_number=?,
        date_of_birth=?,
        emergency_contact=?,
        enabled=?,
        gender=?,
        latitude=?,
        longitude=?,
        name=?,
        organization_id=?,
        password=?,
        phone=?,
        role=?,
        state=?,
        updated_at=?,
        username=? 
    where
        id=?
2025-11-06T02:53:31.749-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-3] org.hibernate.orm.jdbc.bind              : binding parameter (1:VARCHAR) <- [Rua Bruno Porto, 555, Apto 1604-B]
2025-11-06T02:53:31.749-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-3] org.hibernate.orm.jdbc.bind              : binding parameter (2:BIGINT) <- [1058]
2025-11-06T02:53:31.750-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-3] org.hibernate.orm.jdbc.bind              : binding parameter (3:VARCHAR) <- [null]
2025-11-06T02:53:31.750-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-3] org.hibernate.orm.jdbc.bind              : binding parameter (4:VARCHAR) <- [78181143353]
2025-11-06T02:53:31.750-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-3] org.hibernate.orm.jdbc.bind              : binding parameter (5:DATE) <- [2025-11-05]
2025-11-06T02:53:31.750-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-3] org.hibernate.orm.jdbc.bind              : binding parameter (6:VARCHAR) <- [null]
2025-11-06T02:53:31.751-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-3] org.hibernate.orm.jdbc.bind              : binding parameter (7:BOOLEAN) <- [true]
2025-11-06T02:53:31.751-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-3] org.hibernate.orm.jdbc.bind              : binding parameter (8:VARCHAR) <- [MALE]
2025-11-06T02:53:31.751-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-3] org.hibernate.orm.jdbc.bind              : binding parameter (9:DOUBLE) <- [-3.8566]
2025-11-06T02:53:31.751-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-3] org.hibernate.orm.jdbc.bind              : binding parameter (10:DOUBLE) <- [-40.9219]
2025-11-06T02:53:31.751-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-3] org.hibernate.orm.jdbc.bind              : binding parameter (11:VARCHAR) <- [Motoboy1]
2025-11-06T02:53:31.751-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-3] org.hibernate.orm.jdbc.bind              : binding parameter (12:BIGINT) <- [null]
2025-11-06T02:53:31.752-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-3] org.hibernate.orm.jdbc.bind              : binding parameter (13:VARCHAR) <- [$2a$10$hpCrBK2I33zy1/K1R51Js.2FEFE6JN.OODQXhUHWovm54Vs2x.wmW]
2025-11-06T02:53:31.752-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-3] org.hibernate.orm.jdbc.bind              : binding parameter (14:VARCHAR) <- [85997572919]
2025-11-06T02:53:31.752-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-3] org.hibernate.orm.jdbc.bind              : binding parameter (15:VARCHAR) <- [COURIER]
2025-11-06T02:53:31.752-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-3] org.hibernate.orm.jdbc.bind              : binding parameter (16:VARCHAR) <- [null]
2025-11-06T02:53:31.752-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-3] org.hibernate.orm.jdbc.bind              : binding parameter (17:TIMESTAMP) <- [2025-11-06T02:53:31.686913870]
2025-11-06T02:53:31.753-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-3] org.hibernate.orm.jdbc.bind              : binding parameter (18:VARCHAR) <- [motoboy1@gmail.com]
2025-11-06T02:53:31.753-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-3] org.hibernate.orm.jdbc.bind              : binding parameter (19:UUID) <- [6186c7af-2311-4756-bfc6-ce98bd31ed27]
2025-11-06T02:53:31.801-03:00  INFO 646382 --- [mvt-events] [0.0-8080-exec-3] com.mvt.mvt_events.tenant.TenantFilter   : üîö TenantFilter - Request completed
2025-11-06T02:53:44.162-03:00 DEBUG 646382 --- [mvt-events] [0.0-8080-exec-4] org.hibernate.SQL                        : 
    /* SELECT
        u 
    FROM
        User u 
    WHERE
        u.username = :username */ select
            u1_0.id,
            u1_0.address,
            c1_0.id,
            c1_0.created_at,
            c1_0.ibge_code,
            c1_0.name,
            c1_0.state,
            c1_0.state_code,
            c1_0.updated_at,
            u1_0.country,
            u1_0.document_number,
            u1_0.created_at,
            u1_0.date_of_birth,
            u1_0.emergency_contact,
            u1_0.enabled,
            u1_0.gender,
            u1_0.latitude,
            u1_0.longitude,
            u1_0.name,
            o1_0.id,
            o1_0.city_id,
            o1_0.commission_percentage,
            o1_0.contact_email,
            o1_0.created_at,
            o1_0.description,
            o1_0.logo_url,
            o1_0.name,
            o1_0.phone,
            o1_0.slug,
            o1_0.status,
            o1_0.updated_at,
            o1_0.website,
            u1_0.password,
            u1_0.phone,
            u1_0.role,
            u1_0.state,
            u1_0.updated_at,
            u1_0.username 
        from
            users u1_0 
        left join
            cities c1_0 
                on c1_0.id=u1_0.city_id 
        left join
            organizations o1_0 
                on o1_0.id=u1_0.organization_id 
        where
            u1_0.username=?
Hibernate: 
    /* SELECT
        u 
    FROM
        User u 
    WHERE
        u.username = :username */ select
            u1_0.id,
            u1_0.address,
            c1_0.id,
            c1_0.created_at,
            c1_0.ibge_code,
            c1_0.name,
            c1_0.state,
            c1_0.state_code,
            c1_0.updated_at,
            u1_0.country,
            u1_0.document_number,
            u1_0.created_at,
            u1_0.date_of_birth,
            u1_0.emergency_contact,
            u1_0.enabled,
            u1_0.gender,
            u1_0.latitude,
            u1_0.longitude,
            u1_0.name,
            o1_0.id,
            o1_0.city_id,
            o1_0.commission_percentage,
            o1_0.contact_email,
            o1_0.created_at,
            o1_0.description,
            o1_0.logo_url,
            o1_0.name,
            o1_0.phone,
            o1_0.slug,
            o1_0.status,
            o1_0.updated_at,
            o1_0.website,
            u1_0.password,
            u1_0.phone,
            u1_0.role,
            u1_0.state,
            u1_0.updated_at,
            u1_0.username 
        from
            users u1_0 
        left join
            cities c1_0 
                on c1_0.id=u1_0.city_id 
        left join
            organizations o1_0 
                on o1_0.id=u1_0.organization_id 
        where
            u1_0.username=?
2025-11-06T02:53:44.164-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-4] org.hibernate.orm.jdbc.bind              : binding parameter (1:VARCHAR) <- [moveltrack@gmail.com]
2025-11-06T02:53:44.179-03:00  INFO 646382 --- [mvt-events] [0.0-8080-exec-4] com.mvt.mvt_events.tenant.TenantFilter   : üîç TenantFilter - Request: POST /api/deliveries
2025-11-06T02:53:44.180-03:00  INFO 646382 --- [mvt-events] [0.0-8080-exec-4] com.mvt.mvt_events.tenant.TenantFilter   : üîç TenantFilter - Authentication: UsernamePasswordAuthenticationToken
2025-11-06T02:53:44.180-03:00  INFO 646382 --- [mvt-events] [0.0-8080-exec-4] com.mvt.mvt_events.tenant.TenantFilter   : üîç TenantFilter - Principal type: com.mvt.mvt_events.jpa.User
2025-11-06T02:53:44.180-03:00  INFO 646382 --- [mvt-events] [0.0-8080-exec-4] com.mvt.mvt_events.tenant.TenantFilter   : üîç TenantFilter - Principal instanceof User: true
2025-11-06T02:53:44.181-03:00  INFO 646382 --- [mvt-events] [0.0-8080-exec-4] com.mvt.mvt_events.tenant.TenantFilter   : üîç TenantFilter - User: moveltrack@gmail.com
2025-11-06T02:53:44.181-03:00  INFO 646382 --- [mvt-events] [0.0-8080-exec-4] com.mvt.mvt_events.tenant.TenantFilter   : ‚úÖ TenantFilter - Tenant ID set to: -564
2025-11-06T02:53:44.221-03:00 DEBUG 646382 --- [mvt-events] [0.0-8080-exec-4] org.hibernate.SQL                        : 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        c1_0.id,
        c1_0.created_at,
        c1_0.ibge_code,
        c1_0.name,
        c1_0.state,
        c1_0.state_code,
        c1_0.updated_at,
        u1_0.country,
        u1_0.document_number,
        u1_0.created_at,
        u1_0.date_of_birth,
        u1_0.emergency_contact,
        u1_0.enabled,
        u1_0.gender,
        u1_0.latitude,
        u1_0.longitude,
        u1_0.name,
        o1_0.id,
        o1_0.city_id,
        o1_0.commission_percentage,
        o1_0.contact_email,
        o1_0.created_at,
        o1_0.description,
        o1_0.logo_url,
        o1_0.name,
        o1_0.phone,
        o1_0.slug,
        o1_0.status,
        o1_0.updated_at,
        o1_0.website,
        u1_0.password,
        u1_0.phone,
        u1_0.role,
        u1_0.state,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    left join
        cities c1_0 
            on c1_0.id=u1_0.city_id 
    left join
        organizations o1_0 
            on o1_0.id=u1_0.organization_id 
    where
        u1_0.username=?
Hibernate: 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        c1_0.id,
        c1_0.created_at,
        c1_0.ibge_code,
        c1_0.name,
        c1_0.state,
        c1_0.state_code,
        c1_0.updated_at,
        u1_0.country,
        u1_0.document_number,
        u1_0.created_at,
        u1_0.date_of_birth,
        u1_0.emergency_contact,
        u1_0.enabled,
        u1_0.gender,
        u1_0.latitude,
        u1_0.longitude,
        u1_0.name,
        o1_0.id,
        o1_0.city_id,
        o1_0.commission_percentage,
        o1_0.contact_email,
        o1_0.created_at,
        o1_0.description,
        o1_0.logo_url,
        o1_0.name,
        o1_0.phone,
        o1_0.slug,
        o1_0.status,
        o1_0.updated_at,
        o1_0.website,
        u1_0.password,
        u1_0.phone,
        u1_0.role,
        u1_0.state,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    left join
        cities c1_0 
            on c1_0.id=u1_0.city_id 
    left join
        organizations o1_0 
            on o1_0.id=u1_0.organization_id 
    where
        u1_0.username=?
2025-11-06T02:53:44.222-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-4] org.hibernate.orm.jdbc.bind              : binding parameter (1:VARCHAR) <- [moveltrack@gmail.com]
2025-11-06T02:53:44.230-03:00 DEBUG 646382 --- [mvt-events] [0.0-8080-exec-4] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.address,
        u1_0.city_id,
        u1_0.country,
        u1_0.document_number,
        u1_0.created_at,
        u1_0.date_of_birth,
        u1_0.emergency_contact,
        u1_0.enabled,
        u1_0.gender,
        u1_0.latitude,
        u1_0.longitude,
        u1_0.name,
        u1_0.organization_id,
        u1_0.password,
        u1_0.phone,
        u1_0.role,
        u1_0.state,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
Hibernate: 
    select
        u1_0.id,
        u1_0.address,
        u1_0.city_id,
        u1_0.country,
        u1_0.document_number,
        u1_0.created_at,
        u1_0.date_of_birth,
        u1_0.emergency_contact,
        u1_0.enabled,
        u1_0.gender,
        u1_0.latitude,
        u1_0.longitude,
        u1_0.name,
        u1_0.organization_id,
        u1_0.password,
        u1_0.phone,
        u1_0.role,
        u1_0.state,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-11-06T02:53:44.231-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-4] org.hibernate.orm.jdbc.bind              : binding parameter (1:UUID) <- [5a9ec5f8-6a5f-44d4-bb76-82ff3e872d57]
2025-11-06T02:53:44.238-03:00 DEBUG 646382 --- [mvt-events] [0.0-8080-exec-4] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.address,
        u1_0.city_id,
        u1_0.country,
        u1_0.document_number,
        u1_0.created_at,
        u1_0.date_of_birth,
        u1_0.emergency_contact,
        u1_0.enabled,
        u1_0.gender,
        u1_0.latitude,
        u1_0.longitude,
        u1_0.name,
        u1_0.organization_id,
        u1_0.password,
        u1_0.phone,
        u1_0.role,
        u1_0.state,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
Hibernate: 
    select
        u1_0.id,
        u1_0.address,
        u1_0.city_id,
        u1_0.country,
        u1_0.document_number,
        u1_0.created_at,
        u1_0.date_of_birth,
        u1_0.emergency_contact,
        u1_0.enabled,
        u1_0.gender,
        u1_0.latitude,
        u1_0.longitude,
        u1_0.name,
        u1_0.organization_id,
        u1_0.password,
        u1_0.phone,
        u1_0.role,
        u1_0.state,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-11-06T02:53:44.239-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-4] org.hibernate.orm.jdbc.bind              : binding parameter (1:UUID) <- [189c7d79-cb21-40c1-9b7c-006ebaa3289a]
2025-11-06T02:53:44.261-03:00 DEBUG 646382 --- [mvt-events] [0.0-8080-exec-4] org.hibernate.SQL                        : 
    /* insert for
        com.mvt.mvt_events.jpa.Delivery */insert 
    into
        deliveries (accepted_at, cancellation_reason, cancelled_at, client_id, completed_at, courier_id, created_at, distance_km, estimated_time_minutes, from_address, from_lat, from_lng, item_description, picked_up_at, recipient_name, recipient_phone, scheduled_pickup_at, status, to_address, to_lat, to_lng, total_amount, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: 
    /* insert for
        com.mvt.mvt_events.jpa.Delivery */insert 
    into
        deliveries (accepted_at, cancellation_reason, cancelled_at, client_id, completed_at, courier_id, created_at, distance_km, estimated_time_minutes, from_address, from_lat, from_lng, item_description, picked_up_at, recipient_name, recipient_phone, scheduled_pickup_at, status, to_address, to_lat, to_lng, total_amount, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-11-06T02:53:44.263-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-4] org.hibernate.orm.jdbc.bind              : binding parameter (1:TIMESTAMP) <- [null]
2025-11-06T02:53:44.263-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-4] org.hibernate.orm.jdbc.bind              : binding parameter (2:VARCHAR) <- [null]
2025-11-06T02:53:44.263-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-4] org.hibernate.orm.jdbc.bind              : binding parameter (3:TIMESTAMP) <- [null]
2025-11-06T02:53:44.263-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-4] org.hibernate.orm.jdbc.bind              : binding parameter (4:UUID) <- [189c7d79-cb21-40c1-9b7c-006ebaa3289a]
2025-11-06T02:53:44.263-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-4] org.hibernate.orm.jdbc.bind              : binding parameter (5:TIMESTAMP) <- [null]
2025-11-06T02:53:44.263-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-4] org.hibernate.orm.jdbc.bind              : binding parameter (6:UUID) <- [null]
2025-11-06T02:53:44.263-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-4] org.hibernate.orm.jdbc.bind              : binding parameter (7:TIMESTAMP) <- [2025-11-06T02:53:44.257135]
2025-11-06T02:53:44.264-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-4] org.hibernate.orm.jdbc.bind              : binding parameter (8:NUMERIC) <- [null]
2025-11-06T02:53:44.264-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-4] org.hibernate.orm.jdbc.bind              : binding parameter (9:INTEGER) <- [null]
2025-11-06T02:53:44.264-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-4] org.hibernate.orm.jdbc.bind              : binding parameter (10:VARCHAR) <- [R. TESTE CORRE√á√ÉO, 555 - Centro, Sobral-CE]
2025-11-06T02:53:44.264-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-4] org.hibernate.orm.jdbc.bind              : binding parameter (11:DOUBLE) <- [-3.871]
2025-11-06T02:53:44.264-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-4] org.hibernate.orm.jdbc.bind              : binding parameter (12:DOUBLE) <- [-40.9163]
2025-11-06T02:53:44.265-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-4] org.hibernate.orm.jdbc.bind              : binding parameter (13:VARCHAR) <- [‚úÖ TESTE COM CORRE√á√ÉO - PUSH NOTIFICATION]
2025-11-06T02:53:44.265-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-4] org.hibernate.orm.jdbc.bind              : binding parameter (14:TIMESTAMP) <- [null]
2025-11-06T02:53:44.265-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-4] org.hibernate.orm.jdbc.bind              : binding parameter (15:VARCHAR) <- [Cliente Final]
2025-11-06T02:53:44.265-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-4] org.hibernate.orm.jdbc.bind              : binding parameter (16:VARCHAR) <- [85977777777]
2025-11-06T02:53:44.265-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-4] org.hibernate.orm.jdbc.bind              : binding parameter (17:TIMESTAMP) <- [null]
2025-11-06T02:53:44.265-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-4] org.hibernate.orm.jdbc.bind              : binding parameter (18:VARCHAR) <- [PENDING]
2025-11-06T02:53:44.265-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-4] org.hibernate.orm.jdbc.bind              : binding parameter (19:VARCHAR) <- [R. DESTINO CORRE√á√ÉO, 444 - Centro, Sobral-CE]
2025-11-06T02:53:44.265-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-4] org.hibernate.orm.jdbc.bind              : binding parameter (20:DOUBLE) <- [-3.8669]
2025-11-06T02:53:44.266-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-4] org.hibernate.orm.jdbc.bind              : binding parameter (21:DOUBLE) <- [-40.9176]
2025-11-06T02:53:44.267-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-4] org.hibernate.orm.jdbc.bind              : binding parameter (22:NUMERIC) <- [299.99]
2025-11-06T02:53:44.268-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-4] org.hibernate.orm.jdbc.bind              : binding parameter (23:TIMESTAMP) <- [2025-11-06T02:53:44.257212]
2025-11-06T02:53:44.308-03:00  INFO 646382 --- [mvt-events] [ notification-1] c.m.m.s.DeliveryNotificationService      : Iniciando notifica√ß√£o de motoboys para delivery 12
2025-11-06T02:53:44.308-03:00  INFO 646382 --- [mvt-events] [ notification-1] c.m.m.s.DeliveryNotificationService      : Executando N√≠vel 1: Organiza√ß√£o titular para delivery 12
2025-11-06T02:53:44.323-03:00 DEBUG 646382 --- [mvt-events] [ notification-1] org.hibernate.SQL                        : 
    /* SELECT
        c 
    FROM
        ClientContract c 
    WHERE
        c.client = :client 
        AND c.isPrimary = true */ select
            cc1_0.id,
            cc1_0.client_id,
            cc1_0.contract_date,
            cc1_0.contract_number,
            cc1_0.created_at,
            cc1_0.end_date,
            cc1_0.is_primary,
            cc1_0.organization_id,
            cc1_0.start_date,
            cc1_0.status,
            cc1_0.updated_at 
        from
            client_contracts cc1_0 
        where
            cc1_0.client_id=? 
            and cc1_0.is_primary=true
Hibernate: 
    /* SELECT
        c 
    FROM
        ClientContract c 
    WHERE
        c.client = :client 
        AND c.isPrimary = true */ select
            cc1_0.id,
            cc1_0.client_id,
            cc1_0.contract_date,
            cc1_0.contract_number,
            cc1_0.created_at,
            cc1_0.end_date,
            cc1_0.is_primary,
            cc1_0.organization_id,
            cc1_0.start_date,
            cc1_0.status,
            cc1_0.updated_at 
        from
            client_contracts cc1_0 
        where
            cc1_0.client_id=? 
            and cc1_0.is_primary=true
2025-11-06T02:53:44.324-03:00 TRACE 646382 --- [mvt-events] [ notification-1] org.hibernate.orm.jdbc.bind              : binding parameter (1:UUID) <- [189c7d79-cb21-40c1-9b7c-006ebaa3289a]
2025-11-06T02:53:44.341-03:00  INFO 646382 --- [mvt-events] [0.0-8080-exec-4] com.mvt.mvt_events.tenant.TenantFilter   : üîö TenantFilter - Request completed
2025-11-06T02:53:44.349-03:00 DEBUG 646382 --- [mvt-events] [ notification-1] org.hibernate.SQL                        : 
    /* SELECT
        ec 
    FROM
        EmploymentContract ec 
    WHERE
        ec.organization = :organization 
        AND ec.isActive = true */ select
            ec1_0.id,
            ec1_0.courier_id,
            ec1_0.created_at,
            ec1_0.is_active,
            ec1_0.linked_at,
            ec1_0.organization_id,
            ec1_0.updated_at 
        from
            employment_contracts ec1_0 
        where
            ec1_0.organization_id=? 
            and ec1_0.is_active=true
Hibernate: 
    /* SELECT
        ec 
    FROM
        EmploymentContract ec 
    WHERE
        ec.organization = :organization 
        AND ec.isActive = true */ select
            ec1_0.id,
            ec1_0.courier_id,
            ec1_0.created_at,
            ec1_0.is_active,
            ec1_0.linked_at,
            ec1_0.organization_id,
            ec1_0.updated_at 
        from
            employment_contracts ec1_0 
        where
            ec1_0.organization_id=? 
            and ec1_0.is_active=true
2025-11-06T02:53:44.350-03:00 TRACE 646382 --- [mvt-events] [ notification-1] org.hibernate.orm.jdbc.bind              : binding parameter (1:BIGINT) <- [1]
2025-11-06T02:53:44.422-03:00 DEBUG 646382 --- [mvt-events] [ notification-1] org.hibernate.SQL                        : 
    /* dynamic native SQL query */ SELECT
        cp.* 
    FROM
        courier_profiles cp 
    JOIN
        users u 
            ON cp.user_id = u.id 
    WHERE
        cp.status = 'AVAILABLE' 
        AND (
            6371 * acos(cos(radians(?)) * cos(radians(u.latitude)) * cos(radians(u.longitude) - radians(?)) + sin(radians(?)) * sin(radians(u.latitude)))
        ) <= ? 
    ORDER BY
        (6371 * acos(cos(radians(?)) * cos(radians(u.latitude)) * cos(radians(u.longitude) - radians(?)) + sin(radians(?)) * sin(radians(u.latitude))))
Hibernate: 
    /* dynamic native SQL query */ SELECT
        cp.* 
    FROM
        courier_profiles cp 
    JOIN
        users u 
            ON cp.user_id = u.id 
    WHERE
        cp.status = 'AVAILABLE' 
        AND (
            6371 * acos(cos(radians(?)) * cos(radians(u.latitude)) * cos(radians(u.longitude) - radians(?)) + sin(radians(?)) * sin(radians(u.latitude)))
        ) <= ? 
    ORDER BY
        (6371 * acos(cos(radians(?)) * cos(radians(u.latitude)) * cos(radians(u.longitude) - radians(?)) + sin(radians(?)) * sin(radians(u.latitude))))
2025-11-06T02:53:44.423-03:00 TRACE 646382 --- [mvt-events] [ notification-1] org.hibernate.orm.jdbc.bind              : binding parameter (1:DOUBLE) <- [-3.871]
2025-11-06T02:53:44.424-03:00 TRACE 646382 --- [mvt-events] [ notification-1] org.hibernate.orm.jdbc.bind              : binding parameter (2:DOUBLE) <- [-40.9163]
2025-11-06T02:53:44.424-03:00 TRACE 646382 --- [mvt-events] [ notification-1] org.hibernate.orm.jdbc.bind              : binding parameter (3:DOUBLE) <- [-3.871]
2025-11-06T02:53:44.425-03:00 TRACE 646382 --- [mvt-events] [ notification-1] org.hibernate.orm.jdbc.bind              : binding parameter (4:DOUBLE) <- [5.0]
2025-11-06T02:53:44.425-03:00 TRACE 646382 --- [mvt-events] [ notification-1] org.hibernate.orm.jdbc.bind              : binding parameter (5:DOUBLE) <- [-3.871]
2025-11-06T02:53:44.425-03:00 TRACE 646382 --- [mvt-events] [ notification-1] org.hibernate.orm.jdbc.bind              : binding parameter (6:DOUBLE) <- [-40.9163]
2025-11-06T02:53:44.425-03:00 TRACE 646382 --- [mvt-events] [ notification-1] org.hibernate.orm.jdbc.bind              : binding parameter (7:DOUBLE) <- [-3.871]
2025-11-06T02:53:44.456-03:00  INFO 646382 --- [mvt-events] [ notification-1] c.m.m.s.DeliveryNotificationService      : Enviando notifica√ß√µes H√çBRIDAS N√≠vel 1 - Organiza√ß√£o Titular para 1 motoboys da delivery 12
2025-11-06T02:53:44.462-03:00 DEBUG 646382 --- [mvt-events] [ notification-1] org.hibernate.SQL                        : 
    /* SELECT
        u 
    FROM
        UserPushToken u 
    WHERE
        u.user.id = :userId 
        AND u.isActive = true */ select
            upt1_0.id,
            upt1_0.created_at,
            upt1_0.device_type,
            upt1_0.is_active,
            upt1_0.platform,
            upt1_0.token,
            upt1_0.updated_at,
            upt1_0.user_id,
            upt1_0.web_auth,
            upt1_0.web_endpoint,
            upt1_0.web_p256dh 
        from
            user_push_tokens upt1_0 
        where
            upt1_0.user_id=? 
            and upt1_0.is_active=true
Hibernate: 
    /* SELECT
        u 
    FROM
        UserPushToken u 
    WHERE
        u.user.id = :userId 
        AND u.isActive = true */ select
            upt1_0.id,
            upt1_0.created_at,
            upt1_0.device_type,
            upt1_0.is_active,
            upt1_0.platform,
            upt1_0.token,
            upt1_0.updated_at,
            upt1_0.user_id,
            upt1_0.web_auth,
            upt1_0.web_endpoint,
            upt1_0.web_p256dh 
        from
            user_push_tokens upt1_0 
        where
            upt1_0.user_id=? 
            and upt1_0.is_active=true
2025-11-06T02:53:44.463-03:00 TRACE 646382 --- [mvt-events] [ notification-1] org.hibernate.orm.jdbc.bind              : binding parameter (1:UUID) <- [6186c7af-2311-4756-bfc6-ce98bd31ed27]
2025-11-06T02:53:44.479-03:00  INFO 646382 --- [mvt-events] [ notification-1] c.m.m.service.PushNotificationService    : Enviando notifica√ß√£o h√≠brida para usu√°rio: 6186c7af-2311-4756-bfc6-ce98bd31ed27
2025-11-06T02:53:44.480-03:00 DEBUG 646382 --- [mvt-events] [ notification-1] c.m.m.service.UserPushTokenService       : Buscando tokens ativos para usu√°rio 6186c7af-2311-4756-bfc6-ce98bd31ed27
2025-11-06T02:53:44.484-03:00 DEBUG 646382 --- [mvt-events] [ notification-1] org.hibernate.SQL                        : 
    /* SELECT
        u 
    FROM
        UserPushToken u 
    WHERE
        u.user.id = :userId 
        AND u.isActive = true */ select
            upt1_0.id,
            upt1_0.created_at,
            upt1_0.device_type,
            upt1_0.is_active,
            upt1_0.platform,
            upt1_0.token,
            upt1_0.updated_at,
            upt1_0.user_id,
            upt1_0.web_auth,
            upt1_0.web_endpoint,
            upt1_0.web_p256dh 
        from
            user_push_tokens upt1_0 
        where
            upt1_0.user_id=? 
            and upt1_0.is_active=true
Hibernate: 
    /* SELECT
        u 
    FROM
        UserPushToken u 
    WHERE
        u.user.id = :userId 
        AND u.isActive = true */ select
            upt1_0.id,
            upt1_0.created_at,
            upt1_0.device_type,
            upt1_0.is_active,
            upt1_0.platform,
            upt1_0.token,
            upt1_0.updated_at,
            upt1_0.user_id,
            upt1_0.web_auth,
            upt1_0.web_endpoint,
            upt1_0.web_p256dh 
        from
            user_push_tokens upt1_0 
        where
            upt1_0.user_id=? 
            and upt1_0.is_active=true
2025-11-06T02:53:44.484-03:00 TRACE 646382 --- [mvt-events] [ notification-1] org.hibernate.orm.jdbc.bind              : binding parameter (1:UUID) <- [6186c7af-2311-4756-bfc6-ce98bd31ed27]
2025-11-06T02:53:44.495-03:00 DEBUG 646382 --- [mvt-events] [ notification-1] c.m.m.service.PushNotificationService    : Enviando notifica√ß√£o para Expo: URL=https://exp.host/--/api/v2/push/send, Messages=1
2025-11-06T02:53:45.317-03:00 ERROR 646382 --- [mvt-events] [ notification-1] c.m.m.service.PushNotificationService    : Erro na comunica√ß√£o com Expo Push API: 400 Bad Request on POST request for "https://exp.host/--/api/v2/push/send": "{"errors":[{"code":"VALIDATION_ERROR","type":"USER","message":"Must correct one of the following issues: [\"$\": Expected object, received array, \"0.channelId\": Expected string, received null].","isTransient":false,"requestId":"d9344372-5d0d-4939-a454-574d6ff3d83d"}]}"

org.springframework.web.client.HttpClientErrorException$BadRequest: 400 Bad Request on POST request for "https://exp.host/--/api/v2/push/send": "{"errors":[{"code":"VALIDATION_ERROR","type":"USER","message":"Must correct one of the following issues: [\"$\": Expected object, received array, \"0.channelId\": Expected string, received null].","isTransient":false,"requestId":"d9344372-5d0d-4939-a454-574d6ff3d83d"}]}"
	at org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:103) ~[spring-web-6.2.11.jar:6.2.11]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:186) ~[spring-web-6.2.11.jar:6.2.11]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:147) ~[spring-web-6.2.11.jar:6.2.11]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:953) ~[spring-web-6.2.11.jar:6.2.11]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:902) ~[spring-web-6.2.11.jar:6.2.11]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:801) ~[spring-web-6.2.11.jar:6.2.11]
	at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:549) ~[spring-web-6.2.11.jar:6.2.11]
	at com.mvt.mvt_events.service.PushNotificationService.sendExpoPushNotification(PushNotificationService.java:242) ~[main/:na]
	at com.mvt.mvt_events.service.PushNotificationService.sendHybridNotificationToUser(PushNotificationService.java:340) ~[main/:na]
	at com.mvt.mvt_events.service.DeliveryNotificationService.sendNotificationsToDrivers(DeliveryNotificationService.java:301) ~[main/:na]
	at com.mvt.mvt_events.service.DeliveryNotificationService.notifyLevel1PrimaryOrganization(DeliveryNotificationService.java:156) ~[main/:na]
	at com.mvt.mvt_events.service.DeliveryNotificationService.notifyAvailableDrivers(DeliveryNotificationService.java:67) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.11.jar:6.2.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.11.jar:6.2.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.11.jar:6.2.11]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.11.jar:6.2.11]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.11.jar:6.2.11]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.11.jar:6.2.11]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.11.jar:6.2.11]
	at org.springframework.util.concurrent.FutureUtils.lambda$toSupplier$0(FutureUtils.java:74) ~[spring-core-6.2.11.jar:6.2.11]
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

2025-11-06T02:53:45.325-03:00  INFO 646382 --- [mvt-events] [ notification-1] c.m.m.service.PushNotificationService    : Notifica√ß√£o h√≠brida enviada para 0 dispositivos do usu√°rio 6186c7af-2311-4756-bfc6-ce98bd31ed27
2025-11-06T02:53:45.325-03:00  INFO 646382 --- [mvt-events] [ notification-1] c.m.m.s.DeliveryNotificationService      : Notifica√ß√£o N√≠vel 1 enviada para delivery 12
2025-11-06T02:54:01.434-03:00 DEBUG 646382 --- [mvt-events] [0.0-8080-exec-6] org.hibernate.SQL                        : 
    /* SELECT
        u 
    FROM
        User u 
    WHERE
        u.username = :username */ select
            u1_0.id,
            u1_0.address,
            c1_0.id,
            c1_0.created_at,
            c1_0.ibge_code,
            c1_0.name,
            c1_0.state,
            c1_0.state_code,
            c1_0.updated_at,
            u1_0.country,
            u1_0.document_number,
            u1_0.created_at,
            u1_0.date_of_birth,
            u1_0.emergency_contact,
            u1_0.enabled,
            u1_0.gender,
            u1_0.latitude,
            u1_0.longitude,
            u1_0.name,
            o1_0.id,
            o1_0.city_id,
            o1_0.commission_percentage,
            o1_0.contact_email,
            o1_0.created_at,
            o1_0.description,
            o1_0.logo_url,
            o1_0.name,
            o1_0.phone,
            o1_0.slug,
            o1_0.status,
            o1_0.updated_at,
            o1_0.website,
            u1_0.password,
            u1_0.phone,
            u1_0.role,
            u1_0.state,
            u1_0.updated_at,
            u1_0.username 
        from
            users u1_0 
        left join
            cities c1_0 
                on c1_0.id=u1_0.city_id 
        left join
            organizations o1_0 
                on o1_0.id=u1_0.organization_id 
        where
            u1_0.username=?
Hibernate: 
    /* SELECT
        u 
    FROM
        User u 
    WHERE
        u.username = :username */ select
            u1_0.id,
            u1_0.address,
            c1_0.id,
            c1_0.created_at,
            c1_0.ibge_code,
            c1_0.name,
            c1_0.state,
            c1_0.state_code,
            c1_0.updated_at,
            u1_0.country,
            u1_0.document_number,
            u1_0.created_at,
            u1_0.date_of_birth,
            u1_0.emergency_contact,
            u1_0.enabled,
            u1_0.gender,
            u1_0.latitude,
            u1_0.longitude,
            u1_0.name,
            o1_0.id,
            o1_0.city_id,
            o1_0.commission_percentage,
            o1_0.contact_email,
            o1_0.created_at,
            o1_0.description,
            o1_0.logo_url,
            o1_0.name,
            o1_0.phone,
            o1_0.slug,
            o1_0.status,
            o1_0.updated_at,
            o1_0.website,
            u1_0.password,
            u1_0.phone,
            u1_0.role,
            u1_0.state,
            u1_0.updated_at,
            u1_0.username 
        from
            users u1_0 
        left join
            cities c1_0 
                on c1_0.id=u1_0.city_id 
        left join
            organizations o1_0 
                on o1_0.id=u1_0.organization_id 
        where
            u1_0.username=?
2025-11-06T02:54:01.436-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-6] org.hibernate.orm.jdbc.bind              : binding parameter (1:VARCHAR) <- [motoboy1@gmail.com]
2025-11-06T02:54:01.448-03:00  INFO 646382 --- [mvt-events] [0.0-8080-exec-6] com.mvt.mvt_events.tenant.TenantFilter   : üîç TenantFilter - Request: PUT /api/users/6186c7af-2311-4756-bfc6-ce98bd31ed27/location
2025-11-06T02:54:01.448-03:00  INFO 646382 --- [mvt-events] [0.0-8080-exec-6] com.mvt.mvt_events.tenant.TenantFilter   : üîç TenantFilter - Authentication: UsernamePasswordAuthenticationToken
2025-11-06T02:54:01.448-03:00  INFO 646382 --- [mvt-events] [0.0-8080-exec-6] com.mvt.mvt_events.tenant.TenantFilter   : üîç TenantFilter - Principal type: com.mvt.mvt_events.jpa.User
2025-11-06T02:54:01.448-03:00  INFO 646382 --- [mvt-events] [0.0-8080-exec-6] com.mvt.mvt_events.tenant.TenantFilter   : üîç TenantFilter - Principal instanceof User: true
2025-11-06T02:54:01.448-03:00  INFO 646382 --- [mvt-events] [0.0-8080-exec-6] com.mvt.mvt_events.tenant.TenantFilter   : üîç TenantFilter - User: motoboy1@gmail.com
2025-11-06T02:54:01.448-03:00  INFO 646382 --- [mvt-events] [0.0-8080-exec-6] com.mvt.mvt_events.tenant.TenantFilter   : ‚úÖ TenantFilter - Tenant ID set to: 78
2025-11-06T02:54:01.455-03:00 DEBUG 646382 --- [mvt-events] [0.0-8080-exec-6] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.address,
        u1_0.city_id,
        u1_0.country,
        u1_0.document_number,
        u1_0.created_at,
        u1_0.date_of_birth,
        u1_0.emergency_contact,
        u1_0.enabled,
        u1_0.gender,
        u1_0.latitude,
        u1_0.longitude,
        u1_0.name,
        u1_0.organization_id,
        u1_0.password,
        u1_0.phone,
        u1_0.role,
        u1_0.state,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
Hibernate: 
    select
        u1_0.id,
        u1_0.address,
        u1_0.city_id,
        u1_0.country,
        u1_0.document_number,
        u1_0.created_at,
        u1_0.date_of_birth,
        u1_0.emergency_contact,
        u1_0.enabled,
        u1_0.gender,
        u1_0.latitude,
        u1_0.longitude,
        u1_0.name,
        u1_0.organization_id,
        u1_0.password,
        u1_0.phone,
        u1_0.role,
        u1_0.state,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-11-06T02:54:01.456-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-6] org.hibernate.orm.jdbc.bind              : binding parameter (1:UUID) <- [6186c7af-2311-4756-bfc6-ce98bd31ed27]
2025-11-06T02:54:01.466-03:00 DEBUG 646382 --- [mvt-events] [0.0-8080-exec-6] org.hibernate.SQL                        : 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        c1_0.id,
        c1_0.created_at,
        c1_0.ibge_code,
        c1_0.name,
        c1_0.state,
        c1_0.state_code,
        c1_0.updated_at,
        u1_0.country,
        u1_0.document_number,
        u1_0.created_at,
        u1_0.date_of_birth,
        u1_0.emergency_contact,
        u1_0.enabled,
        u1_0.gender,
        u1_0.latitude,
        u1_0.longitude,
        u1_0.name,
        o1_0.id,
        o1_0.city_id,
        o1_0.commission_percentage,
        o1_0.contact_email,
        o1_0.created_at,
        o1_0.description,
        o1_0.logo_url,
        o1_0.name,
        o1_0.phone,
        o1_0.slug,
        o1_0.status,
        o1_0.updated_at,
        o1_0.website,
        u1_0.password,
        u1_0.phone,
        u1_0.role,
        u1_0.state,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    left join
        cities c1_0 
            on c1_0.id=u1_0.city_id 
    left join
        organizations o1_0 
            on o1_0.id=u1_0.organization_id 
    where
        u1_0.username=?
Hibernate: 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        c1_0.id,
        c1_0.created_at,
        c1_0.ibge_code,
        c1_0.name,
        c1_0.state,
        c1_0.state_code,
        c1_0.updated_at,
        u1_0.country,
        u1_0.document_number,
        u1_0.created_at,
        u1_0.date_of_birth,
        u1_0.emergency_contact,
        u1_0.enabled,
        u1_0.gender,
        u1_0.latitude,
        u1_0.longitude,
        u1_0.name,
        o1_0.id,
        o1_0.city_id,
        o1_0.commission_percentage,
        o1_0.contact_email,
        o1_0.created_at,
        o1_0.description,
        o1_0.logo_url,
        o1_0.name,
        o1_0.phone,
        o1_0.slug,
        o1_0.status,
        o1_0.updated_at,
        o1_0.website,
        u1_0.password,
        u1_0.phone,
        u1_0.role,
        u1_0.state,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    left join
        cities c1_0 
            on c1_0.id=u1_0.city_id 
    left join
        organizations o1_0 
            on o1_0.id=u1_0.organization_id 
    where
        u1_0.username=?
2025-11-06T02:54:01.467-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-6] org.hibernate.orm.jdbc.bind              : binding parameter (1:VARCHAR) <- [motoboy1@gmail.com]
2025-11-06T02:54:01.475-03:00 DEBUG 646382 --- [mvt-events] [0.0-8080-exec-6] org.hibernate.SQL                        : 
    /* update
        for com.mvt.mvt_events.jpa.User */update users 
    set
        address=?,
        city_id=?,
        country=?,
        document_number=?,
        date_of_birth=?,
        emergency_contact=?,
        enabled=?,
        gender=?,
        latitude=?,
        longitude=?,
        name=?,
        organization_id=?,
        password=?,
        phone=?,
        role=?,
        state=?,
        updated_at=?,
        username=? 
    where
        id=?
Hibernate: 
    /* update
        for com.mvt.mvt_events.jpa.User */update users 
    set
        address=?,
        city_id=?,
        country=?,
        document_number=?,
        date_of_birth=?,
        emergency_contact=?,
        enabled=?,
        gender=?,
        latitude=?,
        longitude=?,
        name=?,
        organization_id=?,
        password=?,
        phone=?,
        role=?,
        state=?,
        updated_at=?,
        username=? 
    where
        id=?
2025-11-06T02:54:01.476-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-6] org.hibernate.orm.jdbc.bind              : binding parameter (1:VARCHAR) <- [Rua Bruno Porto, 555, Apto 1604-B]
2025-11-06T02:54:01.476-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-6] org.hibernate.orm.jdbc.bind              : binding parameter (2:BIGINT) <- [1058]
2025-11-06T02:54:01.476-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-6] org.hibernate.orm.jdbc.bind              : binding parameter (3:VARCHAR) <- [null]
2025-11-06T02:54:01.476-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-6] org.hibernate.orm.jdbc.bind              : binding parameter (4:VARCHAR) <- [78181143353]
2025-11-06T02:54:01.476-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-6] org.hibernate.orm.jdbc.bind              : binding parameter (5:DATE) <- [2025-11-05]
2025-11-06T02:54:01.476-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-6] org.hibernate.orm.jdbc.bind              : binding parameter (6:VARCHAR) <- [null]
2025-11-06T02:54:01.477-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-6] org.hibernate.orm.jdbc.bind              : binding parameter (7:BOOLEAN) <- [true]
2025-11-06T02:54:01.477-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-6] org.hibernate.orm.jdbc.bind              : binding parameter (8:VARCHAR) <- [MALE]
2025-11-06T02:54:01.477-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-6] org.hibernate.orm.jdbc.bind              : binding parameter (9:DOUBLE) <- [-3.8566]
2025-11-06T02:54:01.477-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-6] org.hibernate.orm.jdbc.bind              : binding parameter (10:DOUBLE) <- [-40.9219]
2025-11-06T02:54:01.477-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-6] org.hibernate.orm.jdbc.bind              : binding parameter (11:VARCHAR) <- [Motoboy1]
2025-11-06T02:54:01.477-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-6] org.hibernate.orm.jdbc.bind              : binding parameter (12:BIGINT) <- [null]
2025-11-06T02:54:01.477-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-6] org.hibernate.orm.jdbc.bind              : binding parameter (13:VARCHAR) <- [$2a$10$hpCrBK2I33zy1/K1R51Js.2FEFE6JN.OODQXhUHWovm54Vs2x.wmW]
2025-11-06T02:54:01.477-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-6] org.hibernate.orm.jdbc.bind              : binding parameter (14:VARCHAR) <- [85997572919]
2025-11-06T02:54:01.477-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-6] org.hibernate.orm.jdbc.bind              : binding parameter (15:VARCHAR) <- [COURIER]
2025-11-06T02:54:01.477-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-6] org.hibernate.orm.jdbc.bind              : binding parameter (16:VARCHAR) <- [null]
2025-11-06T02:54:01.478-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-6] org.hibernate.orm.jdbc.bind              : binding parameter (17:TIMESTAMP) <- [2025-11-06T02:54:01.473810531]
2025-11-06T02:54:01.478-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-6] org.hibernate.orm.jdbc.bind              : binding parameter (18:VARCHAR) <- [motoboy1@gmail.com]
2025-11-06T02:54:01.478-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-6] org.hibernate.orm.jdbc.bind              : binding parameter (19:UUID) <- [6186c7af-2311-4756-bfc6-ce98bd31ed27]
2025-11-06T02:54:01.487-03:00  INFO 646382 --- [mvt-events] [0.0-8080-exec-6] com.mvt.mvt_events.tenant.TenantFilter   : üîö TenantFilter - Request completed
2025-11-06T02:54:31.438-03:00 DEBUG 646382 --- [mvt-events] [0.0-8080-exec-7] org.hibernate.SQL                        : 
    /* SELECT
        u 
    FROM
        User u 
    WHERE
        u.username = :username */ select
            u1_0.id,
            u1_0.address,
            c1_0.id,
            c1_0.created_at,
            c1_0.ibge_code,
            c1_0.name,
            c1_0.state,
            c1_0.state_code,
            c1_0.updated_at,
            u1_0.country,
            u1_0.document_number,
            u1_0.created_at,
            u1_0.date_of_birth,
            u1_0.emergency_contact,
            u1_0.enabled,
            u1_0.gender,
            u1_0.latitude,
            u1_0.longitude,
            u1_0.name,
            o1_0.id,
            o1_0.city_id,
            o1_0.commission_percentage,
            o1_0.contact_email,
            o1_0.created_at,
            o1_0.description,
            o1_0.logo_url,
            o1_0.name,
            o1_0.phone,
            o1_0.slug,
            o1_0.status,
            o1_0.updated_at,
            o1_0.website,
            u1_0.password,
            u1_0.phone,
            u1_0.role,
            u1_0.state,
            u1_0.updated_at,
            u1_0.username 
        from
            users u1_0 
        left join
            cities c1_0 
                on c1_0.id=u1_0.city_id 
        left join
            organizations o1_0 
                on o1_0.id=u1_0.organization_id 
        where
            u1_0.username=?
Hibernate: 
    /* SELECT
        u 
    FROM
        User u 
    WHERE
        u.username = :username */ select
            u1_0.id,
            u1_0.address,
            c1_0.id,
            c1_0.created_at,
            c1_0.ibge_code,
            c1_0.name,
            c1_0.state,
            c1_0.state_code,
            c1_0.updated_at,
            u1_0.country,
            u1_0.document_number,
            u1_0.created_at,
            u1_0.date_of_birth,
            u1_0.emergency_contact,
            u1_0.enabled,
            u1_0.gender,
            u1_0.latitude,
            u1_0.longitude,
            u1_0.name,
            o1_0.id,
            o1_0.city_id,
            o1_0.commission_percentage,
            o1_0.contact_email,
            o1_0.created_at,
            o1_0.description,
            o1_0.logo_url,
            o1_0.name,
            o1_0.phone,
            o1_0.slug,
            o1_0.status,
            o1_0.updated_at,
            o1_0.website,
            u1_0.password,
            u1_0.phone,
            u1_0.role,
            u1_0.state,
            u1_0.updated_at,
            u1_0.username 
        from
            users u1_0 
        left join
            cities c1_0 
                on c1_0.id=u1_0.city_id 
        left join
            organizations o1_0 
                on o1_0.id=u1_0.organization_id 
        where
            u1_0.username=?
2025-11-06T02:54:31.442-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-7] org.hibernate.orm.jdbc.bind              : binding parameter (1:VARCHAR) <- [motoboy1@gmail.com]
2025-11-06T02:54:31.454-03:00  INFO 646382 --- [mvt-events] [0.0-8080-exec-7] com.mvt.mvt_events.tenant.TenantFilter   : üîç TenantFilter - Request: PUT /api/users/6186c7af-2311-4756-bfc6-ce98bd31ed27/location
2025-11-06T02:54:31.454-03:00  INFO 646382 --- [mvt-events] [0.0-8080-exec-7] com.mvt.mvt_events.tenant.TenantFilter   : üîç TenantFilter - Authentication: UsernamePasswordAuthenticationToken
2025-11-06T02:54:31.454-03:00  INFO 646382 --- [mvt-events] [0.0-8080-exec-7] com.mvt.mvt_events.tenant.TenantFilter   : üîç TenantFilter - Principal type: com.mvt.mvt_events.jpa.User
2025-11-06T02:54:31.454-03:00  INFO 646382 --- [mvt-events] [0.0-8080-exec-7] com.mvt.mvt_events.tenant.TenantFilter   : üîç TenantFilter - Principal instanceof User: true
2025-11-06T02:54:31.455-03:00  INFO 646382 --- [mvt-events] [0.0-8080-exec-7] com.mvt.mvt_events.tenant.TenantFilter   : üîç TenantFilter - User: motoboy1@gmail.com
2025-11-06T02:54:31.455-03:00  INFO 646382 --- [mvt-events] [0.0-8080-exec-7] com.mvt.mvt_events.tenant.TenantFilter   : ‚úÖ TenantFilter - Tenant ID set to: 78
2025-11-06T02:54:31.462-03:00 DEBUG 646382 --- [mvt-events] [0.0-8080-exec-7] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.address,
        u1_0.city_id,
        u1_0.country,
        u1_0.document_number,
        u1_0.created_at,
        u1_0.date_of_birth,
        u1_0.emergency_contact,
        u1_0.enabled,
        u1_0.gender,
        u1_0.latitude,
        u1_0.longitude,
        u1_0.name,
        u1_0.organization_id,
        u1_0.password,
        u1_0.phone,
        u1_0.role,
        u1_0.state,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
Hibernate: 
    select
        u1_0.id,
        u1_0.address,
        u1_0.city_id,
        u1_0.country,
        u1_0.document_number,
        u1_0.created_at,
        u1_0.date_of_birth,
        u1_0.emergency_contact,
        u1_0.enabled,
        u1_0.gender,
        u1_0.latitude,
        u1_0.longitude,
        u1_0.name,
        u1_0.organization_id,
        u1_0.password,
        u1_0.phone,
        u1_0.role,
        u1_0.state,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    where
        u1_0.id=?
2025-11-06T02:54:31.462-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-7] org.hibernate.orm.jdbc.bind              : binding parameter (1:UUID) <- [6186c7af-2311-4756-bfc6-ce98bd31ed27]
2025-11-06T02:54:31.471-03:00 DEBUG 646382 --- [mvt-events] [0.0-8080-exec-7] org.hibernate.SQL                        : 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        c1_0.id,
        c1_0.created_at,
        c1_0.ibge_code,
        c1_0.name,
        c1_0.state,
        c1_0.state_code,
        c1_0.updated_at,
        u1_0.country,
        u1_0.document_number,
        u1_0.created_at,
        u1_0.date_of_birth,
        u1_0.emergency_contact,
        u1_0.enabled,
        u1_0.gender,
        u1_0.latitude,
        u1_0.longitude,
        u1_0.name,
        o1_0.id,
        o1_0.city_id,
        o1_0.commission_percentage,
        o1_0.contact_email,
        o1_0.created_at,
        o1_0.description,
        o1_0.logo_url,
        o1_0.name,
        o1_0.phone,
        o1_0.slug,
        o1_0.status,
        o1_0.updated_at,
        o1_0.website,
        u1_0.password,
        u1_0.phone,
        u1_0.role,
        u1_0.state,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    left join
        cities c1_0 
            on c1_0.id=u1_0.city_id 
    left join
        organizations o1_0 
            on o1_0.id=u1_0.organization_id 
    where
        u1_0.username=?
Hibernate: 
    /* <criteria> */ select
        u1_0.id,
        u1_0.address,
        c1_0.id,
        c1_0.created_at,
        c1_0.ibge_code,
        c1_0.name,
        c1_0.state,
        c1_0.state_code,
        c1_0.updated_at,
        u1_0.country,
        u1_0.document_number,
        u1_0.created_at,
        u1_0.date_of_birth,
        u1_0.emergency_contact,
        u1_0.enabled,
        u1_0.gender,
        u1_0.latitude,
        u1_0.longitude,
        u1_0.name,
        o1_0.id,
        o1_0.city_id,
        o1_0.commission_percentage,
        o1_0.contact_email,
        o1_0.created_at,
        o1_0.description,
        o1_0.logo_url,
        o1_0.name,
        o1_0.phone,
        o1_0.slug,
        o1_0.status,
        o1_0.updated_at,
        o1_0.website,
        u1_0.password,
        u1_0.phone,
        u1_0.role,
        u1_0.state,
        u1_0.updated_at,
        u1_0.username 
    from
        users u1_0 
    left join
        cities c1_0 
            on c1_0.id=u1_0.city_id 
    left join
        organizations o1_0 
            on o1_0.id=u1_0.organization_id 
    where
        u1_0.username=?
2025-11-06T02:54:31.471-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-7] org.hibernate.orm.jdbc.bind              : binding parameter (1:VARCHAR) <- [motoboy1@gmail.com]
2025-11-06T02:54:31.479-03:00 DEBUG 646382 --- [mvt-events] [0.0-8080-exec-7] org.hibernate.SQL                        : 
    /* update
        for com.mvt.mvt_events.jpa.User */update users 
    set
        address=?,
        city_id=?,
        country=?,
        document_number=?,
        date_of_birth=?,
        emergency_contact=?,
        enabled=?,
        gender=?,
        latitude=?,
        longitude=?,
        name=?,
        organization_id=?,
        password=?,
        phone=?,
        role=?,
        state=?,
        updated_at=?,
        username=? 
    where
        id=?
Hibernate: 
    /* update
        for com.mvt.mvt_events.jpa.User */update users 
    set
        address=?,
        city_id=?,
        country=?,
        document_number=?,
        date_of_birth=?,
        emergency_contact=?,
        enabled=?,
        gender=?,
        latitude=?,
        longitude=?,
        name=?,
        organization_id=?,
        password=?,
        phone=?,
        role=?,
        state=?,
        updated_at=?,
        username=? 
    where
        id=?
2025-11-06T02:54:31.480-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-7] org.hibernate.orm.jdbc.bind              : binding parameter (1:VARCHAR) <- [Rua Bruno Porto, 555, Apto 1604-B]
2025-11-06T02:54:31.480-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-7] org.hibernate.orm.jdbc.bind              : binding parameter (2:BIGINT) <- [1058]
2025-11-06T02:54:31.480-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-7] org.hibernate.orm.jdbc.bind              : binding parameter (3:VARCHAR) <- [null]
2025-11-06T02:54:31.480-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-7] org.hibernate.orm.jdbc.bind              : binding parameter (4:VARCHAR) <- [78181143353]
2025-11-06T02:54:31.480-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-7] org.hibernate.orm.jdbc.bind              : binding parameter (5:DATE) <- [2025-11-05]
2025-11-06T02:54:31.480-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-7] org.hibernate.orm.jdbc.bind              : binding parameter (6:VARCHAR) <- [null]
2025-11-06T02:54:31.481-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-7] org.hibernate.orm.jdbc.bind              : binding parameter (7:BOOLEAN) <- [true]
2025-11-06T02:54:31.481-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-7] org.hibernate.orm.jdbc.bind              : binding parameter (8:VARCHAR) <- [MALE]
2025-11-06T02:54:31.481-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-7] org.hibernate.orm.jdbc.bind              : binding parameter (9:DOUBLE) <- [-3.8566]
2025-11-06T02:54:31.481-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-7] org.hibernate.orm.jdbc.bind              : binding parameter (10:DOUBLE) <- [-40.9219]
2025-11-06T02:54:31.481-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-7] org.hibernate.orm.jdbc.bind              : binding parameter (11:VARCHAR) <- [Motoboy1]
2025-11-06T02:54:31.481-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-7] org.hibernate.orm.jdbc.bind              : binding parameter (12:BIGINT) <- [null]
2025-11-06T02:54:31.481-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-7] org.hibernate.orm.jdbc.bind              : binding parameter (13:VARCHAR) <- [$2a$10$hpCrBK2I33zy1/K1R51Js.2FEFE6JN.OODQXhUHWovm54Vs2x.wmW]
2025-11-06T02:54:31.481-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-7] org.hibernate.orm.jdbc.bind              : binding parameter (14:VARCHAR) <- [85997572919]
2025-11-06T02:54:31.481-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-7] org.hibernate.orm.jdbc.bind              : binding parameter (15:VARCHAR) <- [COURIER]
2025-11-06T02:54:31.481-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-7] org.hibernate.orm.jdbc.bind              : binding parameter (16:VARCHAR) <- [null]
2025-11-06T02:54:31.481-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-7] org.hibernate.orm.jdbc.bind              : binding parameter (17:TIMESTAMP) <- [2025-11-06T02:54:31.478283063]
2025-11-06T02:54:31.481-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-7] org.hibernate.orm.jdbc.bind              : binding parameter (18:VARCHAR) <- [motoboy1@gmail.com]
2025-11-06T02:54:31.482-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-7] org.hibernate.orm.jdbc.bind              : binding parameter (19:UUID) <- [6186c7af-2311-4756-bfc6-ce98bd31ed27]
2025-11-06T02:54:31.491-03:00  INFO 646382 --- [mvt-events] [0.0-8080-exec-7] com.mvt.mvt_events.tenant.TenantFilter   : üîö TenantFilter - Request completed
2025-11-06T02:55:01.443-03:00 DEBUG 646382 --- [mvt-events] [0.0-8080-exec-8] org.hibernate.SQL                        : 
    /* SELECT
        u 
    FROM
        User u 
    WHERE
        u.username = :username */ select
            u1_0.id,
            u1_0.address,
            c1_0.id,
            c1_0.created_at,
            c1_0.ibge_code,
            c1_0.name,
            c1_0.state,
            c1_0.state_code,
            c1_0.updated_at,
            u1_0.country,
            u1_0.document_number,
            u1_0.created_at,
            u1_0.date_of_birth,
            u1_0.emergency_contact,
            u1_0.enabled,
            u1_0.gender,
            u1_0.latitude,
            u1_0.longitude,
            u1_0.name,
            o1_0.id,
            o1_0.city_id,
            o1_0.commission_percentage,
            o1_0.contact_email,
            o1_0.created_at,
            o1_0.description,
            o1_0.logo_url,
            o1_0.name,
            o1_0.phone,
            o1_0.slug,
            o1_0.status,
            o1_0.updated_at,
            o1_0.website,
            u1_0.password,
            u1_0.phone,
            u1_0.role,
            u1_0.state,
            u1_0.updated_at,
            u1_0.username 
        from
            users u1_0 
        left join
            cities c1_0 
                on c1_0.id=u1_0.city_id 
        left join
            organizations o1_0 
                on o1_0.id=u1_0.organization_id 
        where
            u1_0.username=?
Hibernate: 
    /* SELECT
        u 
    FROM
        User u 
    WHERE
        u.username = :username */ select
            u1_0.id,
            u1_0.address,
            c1_0.id,
            c1_0.created_at,
            c1_0.ibge_code,
            c1_0.name,
            c1_0.state,
            c1_0.state_code,
            c1_0.updated_at,
            u1_0.country,
            u1_0.document_number,
            u1_0.created_at,
            u1_0.date_of_birth,
            u1_0.emergency_contact,
            u1_0.enabled,
            u1_0.gender,
            u1_0.latitude,
            u1_0.longitude,
            u1_0.name,
            o1_0.id,
            o1_0.city_id,
            o1_0.commission_percentage,
            o1_0.contact_email,
            o1_0.created_at,
            o1_0.description,
            o1_0.logo_url,
            o1_0.name,
            o1_0.phone,
            o1_0.slug,
            o1_0.status,
            o1_0.updated_at,
            o1_0.website,
            u1_0.password,
            u1_0.phone,
            u1_0.role,
            u1_0.state,
            u1_0.updated_at,
            u1_0.username 
        from
            users u1_0 
        left join
            cities c1_0 
                on c1_0.id=u1_0.city_id 
        left join
            organizations o1_0 
                on o1_0.id=u1_0.organization_id 
        where
            u1_0.username=?
2025-11-06T02:55:01.445-03:00 TRACE 646382 --- [mvt-events] [0.0-8080-exec-8] org.hibernate.orm.jdbc.bind              : binding parameter (1:VARCHAR) <- [motoboy1@gmail.com]
